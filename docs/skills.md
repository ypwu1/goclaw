# goclaw Skills ç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆ

> å‚è€ƒ OpenClaw çš„ Skills æœºåˆ¶ï¼Œä¸º goclaw è®¾è®¡ä¸€å¥—éµå¾ª [AgentSkills](https://agentskills.io) è§„èŒƒçš„æŠ€èƒ½ç³»ç»Ÿã€‚
>
> **æµ‹è¯•æ–‡æ¡£**: å‚è§ [Skills_Test.md](./Skills_Test.md) æŸ¥çœ‹å®Œæ•´çš„æµ‹è¯•æ­¥éª¤å’Œæ–¹æ³•ã€‚

## è®¾è®¡ç†å¿µ

**Skill æ˜¯çŸ¥è¯†ï¼ˆKnowledgeï¼‰ï¼Œè€Œéç›´æ¥çš„ä»£ç æ’ä»¶ã€‚**

ä¸ä¼ ç»Ÿçš„ "Plugin = Function Call Tool" æ¨¡å¼ä¸åŒï¼ŒAgentSkills çš„æ ¸å¿ƒç†å¿µæ˜¯ **"Prompt Injection" (æç¤ºè¯æ³¨å…¥)**ï¼š
1.  **åŠ è½½**ï¼šç³»ç»ŸåŠ è½½ `SKILL.md`ã€‚
2.  **æ³¨å…¥**ï¼šå°†æŠ€èƒ½çš„ä½¿ç”¨è¯´æ˜æ³¨å…¥åˆ° Agent çš„ System Prompt ä¸­ã€‚
3.  **æ‰§è¡Œ**ï¼šLLM é˜…è¯»è¯´æ˜åï¼Œ**ä¸»åŠ¨è°ƒç”¨ç°æœ‰çš„åŸºç¡€å·¥å…·**ï¼ˆå¦‚ `exec`ã€`read_file`ã€`web_search`ï¼‰æ¥å®Œæˆä»»åŠ¡ã€‚

è¿™ç§è®¾è®¡æå¤§åœ°é™ä½äº†å¼€å‘é—¨æ§›ï¼š**åªè¦ä½ ä¼šå†™æ–‡æ¡£ï¼Œä½ å°±èƒ½å¼€å‘ Skillã€‚**

## æ ¸å¿ƒæ¶æ„

### 1. æŠ€èƒ½å®šä¹‰æ ¼å¼ (SKILL.md)

éµå¾ª [AgentSkills](https://agentskills.io) è§„èŒƒï¼Œå¹¶å…¼å®¹ OpenClaw çš„å…ƒæ•°æ®æ‰©å±•ã€‚

```yaml
---
# --- æ ‡å‡†å­—æ®µ (AgentSkills Standard) ---
name: weather
description: Get current weather and forecasts via CLI.
homepage: https://wttr.in/:help

# --- å…¼å®¹æ‰©å±• (OpenClaw Extension) ---
# ä½¿ç”¨ openclaw å‘½åç©ºé—´ä»¥å®ç°ä¸ç°æœ‰æŠ€èƒ½ç”Ÿæ€çš„äºŒè¿›åˆ¶å…¼å®¹
metadata: 
  openclaw:
    emoji: "ğŸŒ¤ï¸"
    requires: 
      bins: ["curl"] # å‡†å…¥æ£€æŸ¥ï¼šä»…åœ¨ PATH ä¸­å­˜åœ¨ curl æ—¶åŠ è½½
      env: ["WEATHER_API_KEY"] # å¯é€‰ï¼šè¦æ±‚ç‰¹å®šç¯å¢ƒå˜é‡
---

# Weather Forecast
...
```

### 2. æŠ€èƒ½åŠ è½½å™¨ (Loader) ä¸ å‡†å…¥æ§åˆ¶ (Gating)

Loader ä¸ä»…è´Ÿè´£åŠ è½½æ–‡æœ¬ï¼Œè¿˜è´Ÿè´£ **"Skill Gating" (æŠ€èƒ½å‡†å…¥è¿‡æ»¤)**ã€‚

*   **æ ‡å‡†å­—æ®µå¤„ç†**ï¼šè§£æ `name` å’Œ `description` ç”¨äº Prompt è¯†åˆ«ã€‚
*   **å…¼å®¹æ€§è¿‡æ»¤**ï¼šè§£æ `metadata.openclaw.requires`ï¼š
    *   **Bins æ£€æŸ¥**ï¼šè°ƒç”¨ `exec.LookPath` éªŒè¯ä¾èµ–å·¥å…·ï¼ˆå¦‚ `curl`, `git`ï¼‰æ˜¯å¦å­˜åœ¨ã€‚
    *   **Env æ£€æŸ¥**ï¼šéªŒè¯å¿…éœ€çš„ç¯å¢ƒå˜é‡æ˜¯å¦å·²é…ç½®ã€‚
    *   **OS æ£€æŸ¥**ï¼šéªŒè¯å½“å‰ç³»ç»Ÿï¼ˆdarwin/linux/windowsï¼‰æ˜¯å¦å—æ”¯æŒã€‚
*   **ç»“æœ**ï¼šåªæœ‰æ»¡è¶³å‡†å…¥æ¡ä»¶çš„æŠ€èƒ½æ‰ä¼šè¢«æ³¨å…¥åˆ° System Prompt ä¸­ã€‚è¿™ä¿è¯äº† Agent çœ‹åˆ°çš„æŠ€èƒ½éƒ½æ˜¯â€œæ¡èµ·æ¥å°±èƒ½ç”¨â€çš„ã€‚

### 3. ä¸ Agent Loop é›†æˆ (Context Injection)

è¿™æ˜¯ä¸åŸè®¾è®¡æœ€å¤§çš„ä¸åŒç‚¹ï¼š**æˆ‘ä»¬ä¸å†æ³¨å†Œæ–°çš„ Toolï¼Œè€Œæ˜¯æ›´æ–° Promptã€‚**

```go
// agent/context.go

// BuildSystemPrompt æ„å»ºç³»ç»Ÿæç¤ºè¯
func (b *ContextBuilder) BuildSystemPrompt(skills []*Skill) string {
    var sb strings.Builder
    
    // ... åŸºç¡€èº«ä»½å®šä¹‰ ...

    // æ³¨å…¥æŠ€èƒ½éƒ¨åˆ†
    if len(skills) > 0 {
        sb.WriteString("\n## Enabled Skills\n\n")
        sb.WriteString("You have been trained on the following specific skills. Use your base tools (exec, read_file, etc.) to execute them.\n\n")
        
        for _, skill := range skills {
            sb.WriteString(fmt.Sprintf("### %s\n", skill.Name))
            sb.WriteString(fmt.Sprintf("> %s\n\n", skill.Description))
            sb.WriteString(skill.Content) // æ³¨å…¥ SKILL.md çš„ Markdown æ­£æ–‡
            sb.WriteString("\n---\n")
        }
    }

    return sb.String()
}
```

### 4. è‡ªå®šä¹‰äºŒè¿›åˆ¶ (Binaries)

æœ‰äº›æŠ€èƒ½ä¸ä»…ä»…æ˜¯ Promptï¼Œè¿˜åŒ…å«è‡ªå®šä¹‰è„šæœ¬æˆ–äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆä¾‹å¦‚ä¸€ä¸ªå¤æ‚çš„ `database-helper` CLIï¼‰ã€‚

#### ç›®å½•ç»“æ„
```
skills/my-db-helper/
â”œâ”€â”€ SKILL.md
â””â”€â”€ bin/
    â””â”€â”€ db-cli  (å¯æ‰§è¡Œæ–‡ä»¶)
```

#### å¤„ç†é€»è¾‘
1. Loader å‘ç°æŠ€èƒ½ç›®å½•ä¸‹æœ‰ `bin/` æ–‡ä»¶å¤¹ã€‚
2. Loader å°†è¯¥ `bin/` ç›®å½•çš„ç»å¯¹è·¯å¾„åŠ å…¥åˆ° Agent è¿è¡Œæ—¶çš„ `PATH` ç¯å¢ƒå˜é‡ä¸­ã€‚
3. `SKILL.md` ä¸­å†™æ˜ï¼š
   > "Use the `db-cli` command via `exec` tool to interact with the database."
4. LLM è°ƒç”¨ `exec(command="db-cli status")`ã€‚
5. ç³»ç»Ÿåœ¨ PATH ä¸­æ‰¾åˆ°äº† `db-cli` å¹¶æ‰§è¡Œã€‚

**ä¼˜åŠ¿**ï¼šæ— éœ€ç¼–å†™ä»»ä½• Go ä»£ç æ¥åŒ…è£… `db-cli`ï¼ŒLLM ç›´æ¥é€šè¿‡ Shell ä½¿ç”¨å®ƒã€‚

### 5. é…ç½®æ–‡ä»¶ (skills.yaml)

ç®€åŒ–é…ç½®ï¼Œä¸»è¦ç”¨äºå¼€å…³å’Œç¯å¢ƒæ³¨å…¥ã€‚

```yaml
skills:
  # ç¦ç”¨ç‰¹å®šæŠ€èƒ½
  disabled:
    - "heavy-computation-skill"

  # ä¸ºç‰¹å®šæŠ€èƒ½æ³¨å…¥ç¯å¢ƒå˜é‡ï¼ˆä»…åœ¨ Agent è¿è¡Œæ—¶ç”Ÿæ•ˆï¼Œä¸æ±¡æŸ“å…¨å±€ï¼‰
  overrides:
    "weather":
      env:
        DEFAULT_CITY: "Beijing"
    "github-helper":
      env:
        GITHUB_TOKEN: "${GITHUB_TOKEN}" # ä»å®¿ä¸»ç¯å¢ƒé€ä¼ 
```

### 6. å®‰å…¨æ²™ç®± (Sandboxing)

**é‡è¦å‰æ**ï¼šç”±äºæŠ€èƒ½æœ¬è´¨ä¸Šæ˜¯è°ƒç”¨ `exec` ç­‰åŸºç¡€å·¥å…·ï¼Œå®‰å…¨æ§åˆ¶å®Œå…¨ä¾èµ–åŸºç¡€å·¥å…·å±‚çš„é…ç½®ã€‚**åœ¨å¯ç”¨ Skills ç³»ç»Ÿä¹‹å‰ï¼Œå¿…é¡»ç¡®ä¿å·²æ­£ç¡®é…ç½®åŸºç¡€å·¥å…·çš„å®‰å…¨ç­–ç•¥ã€‚**

#### åŸºç¡€å±‚æ§åˆ¶

1. **ShellTool é…ç½®**ï¼šåœ¨ `config.yaml` ä¸­é…ç½® `AllowedCmds` æˆ– `DeniedCmds`
   ```yaml
   tools:
     shell:
       enabled: true
       allowed_cmds:
         - "git"
         - "curl"
         - "node"
         - "python"
       denied_cmds:
         - "rm -rf"
         - "dd"
         - "mkfs"
   ```

2. **æƒé™éš”ç¦»**ï¼šæ¯ä¸ª Agent ä¼šè¯å¯ä»¥æœ‰ä¸åŒçš„æƒé™é…ç½®
   ```yaml
   agents:
     defaults:
       permissions:
         filesystem: true
         network: true
         commands: ["git", "curl"]
     untrusted:
       permissions:
         filesystem: false
         network: false
         commands: []
   ```

#### æ²™ç®±ç¯å¢ƒ

å¦‚æœå¯ç”¨äº† Docker æ²™ç®±ï¼ŒAgent çš„ `exec` æ˜¯åœ¨å®¹å™¨å†…æ‰§è¡Œçš„ï¼š

```yaml
skills:
  sandbox:
    enabled: true
    image: "goclaw/sandbox:latest"
```

**æŒ‘æˆ˜**ï¼šå¦‚æœæ˜¯è‡ªå®šä¹‰äºŒè¿›åˆ¶æŠ€èƒ½ï¼Œéœ€è¦å°† `bin/` æŒ‚è½½åˆ°å®¹å™¨å†…ï¼Œæˆ–è€…åœ¨å®¹å™¨å¯åŠ¨æ—¶å®‰è£…ä¾èµ–ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨ `metadata` ä¸­å®šä¹‰ `install` æ­¥éª¤ï¼Œåœ¨æ„å»ºæ²™ç®±æ—¶é¢„å…ˆå®‰è£…ï¼š

```yaml
---
name: postgres-helper
description: Interact with PostgreSQL databases
metadata:
  openclaw:
    install:
      - type: apt
        packages: ["postgresql-client"]
      - type: copy
        src: "./bin/custom-pg-tool"
        dest: "/usr/local/bin/custom-pg-tool"
---

# PostgreSQL Helper

Use `psql` or `custom-pg-tool` to interact with databases...
```

**å®‰è£…ç±»å‹æ”¯æŒ**ï¼š
- `apt`: Debian/Ubuntu åŒ…ç®¡ç†å™¨
- `yum`: CentOS/RHEL åŒ…ç®¡ç†å™¨
- `brew`: macOS Homebrew
- `npm`: Node.js åŒ…
- `pip`: Python åŒ…
- `copy`: å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°æ²™ç®±
- `url`: ä¸‹è½½è¿œç¨‹è„šæœ¬å¹¶æ‰§è¡Œ

### 7. å¼€å‘æµç¨‹ç¤ºä¾‹

#### åœºæ™¯ï¼šå¼€å‘ä¸€ä¸ª "Git Commit åŠ©æ‰‹" æŠ€èƒ½

1. **åˆ›å»ºç›®å½•**ï¼š`~/.goclaw/skills/git-helper`
2. **åˆ›å»º SKILL.md**ï¼š

```markdown
---
name: git-helper
description: Help user commit code with conventional commitsè§„èŒƒ.
metadata:
  openclaw:
    requires:
      bins: ["git"]
---

# Git Helper

When the user asks to commit code:

1. Check status using `git status`.
2. Generate a commit message following Conventional Commits (feat, fix, docs, etc.).
3. Execute commit using `git commit -m "..."

**Do not ask for confirmation if the change is trivial.**
```

3. **æµ‹è¯•**ï¼š
   - è¿è¡Œ `goclaw chat`
   - ç”¨æˆ·ï¼š"å¸®æˆ‘æäº¤ä»£ç ï¼Œæˆ‘åˆšä¿®äº†ä¸ª bug"
   - Agent (æ€è€ƒ)ï¼š
     - åŠ è½½äº† `git-helper` æŠ€èƒ½ã€‚
     - çœ‹åˆ°æŒ‡ä»¤ï¼šå…ˆç”¨ `git status`ã€‚
     - **Action**: `exec("git status")`
     - **Observation**: `modified: main.go`
     - ç”Ÿæˆ Commit Message: `fix: resolve nil pointer in main loop`
     - **Action**: `exec("git commit -m 'fix: resolve nil pointer in main loop'")`
   - Agent (å›å¤)ï¼š"å·²æäº¤ä¿®å¤ï¼šfix: resolve nil pointer in main loop"

### 8. è°ƒè¯•æœºåˆ¶

ç”±äº Skills ç³»ç»ŸåŸºäº Prompt Injectionï¼Œè°ƒè¯•çš„æ ¸å¿ƒæ˜¯**æŸ¥çœ‹æ³¨å…¥çš„å†…å®¹**ã€‚

#### CLI è°ƒè¯•å‘½ä»¤

```bash
# åˆ—å‡ºæ‰€æœ‰åŠ è½½çš„æŠ€èƒ½
goclaw skills list

# è¯¦ç»†æ¨¡å¼ï¼šæ˜¾ç¤ºæ¯ä¸ªæŠ€èƒ½çš„ IDã€æè¿°å’Œæ³¨å…¥çš„ Prompt ç‰‡æ®µ
goclaw skills list --verbose

# æ‰“å°å®Œæ•´çš„ System Promptï¼ˆåŒ…å«æ‰€æœ‰æ³¨å…¥çš„ Skillsï¼‰
goclaw chat --debug-prompt

# éªŒè¯æŠ€èƒ½çš„ä¾èµ–æ£€æŸ¥
goclaw skills validate weather

# æµ‹è¯•ç‰¹å®šæŠ€èƒ½çš„ Prompt æ•ˆæœ
goclaw skills test git-helper --prompt "å¸®æˆ‘æäº¤ä»£ç "
```

#### æ—¥å¿—è¾“å‡º

å¯ç”¨è¯¦ç»†æ—¥å¿—å¯ä»¥çœ‹åˆ°æŠ€èƒ½åŠ è½½è¿‡ç¨‹ï¼š

```bash
goclaw chat --log-level=debug
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
[DEBUG] Loading skills from: /Users/user/.goclaw/skills
[DEBUG] Found skill: git-helper
[DEBUG] Checking dependencies for git-helper...
[DEBUG]   - Checking binary: git âœ“
[DEBUG] Skill git-helper loaded successfully
[DEBUG] Injecting 3 skills into system prompt
[INFO] System prompt size: 2,456 tokens
```

### 9. æŠ€èƒ½å†²çªä¸ä¼˜å…ˆçº§

#### åŠ è½½ä¼˜å…ˆçº§ï¼ˆç”±é«˜åˆ°ä½ï¼‰

1. **Workspace Skills**: `${WORKSPACE}/skills`
2. **User Skills**: `~/.goclaw/skills`
3. **Builtin Skills**: éšäºŒè¿›åˆ¶åˆ†å‘çš„å†…ç½®æŠ€èƒ½

å½“å‡ºç°åŒåæŠ€èƒ½æ—¶ï¼Œé«˜ä¼˜å…ˆçº§çš„ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„ã€‚

#### æ˜¾å¼ä¼˜å…ˆçº§

åœ¨ `metadata` ä¸­å¯ä»¥è®¾ç½® `priority` å­—æ®µï¼š

```yaml
---
name: custom-weather
description: Custom weather implementation
metadata:
  openclaw:
    priority: 100  # æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œé»˜è®¤ä¸º 50
---
```

#### å†²çªæ£€æµ‹

Loader ä¼šæ£€æµ‹æ½œåœ¨å†²çªå¹¶ç»™å‡ºè­¦å‘Šï¼š

```
[WARN] Skill name conflict: 'weather' exists in both workspace and user
[WARN] Using workspace version (priority: 100 > 50)
```

#### ç¦ç”¨å†²çªæŠ€èƒ½

åœ¨ `skills.yaml` ä¸­å¯ä»¥ç¦ç”¨ç‰¹å®šæ¥æºçš„æŠ€èƒ½ï¼š

```yaml
skills:
  disabled:
    - "builtin/weather"  # ç¦ç”¨å†…ç½®ç‰ˆæœ¬
    # ä½¿ç”¨ workspace/weather ä»£æ›¿
```

### 10. æŠ€èƒ½ç‰ˆæœ¬ç®¡ç†

#### ç‰ˆæœ¬å­—æ®µ

åœ¨ `metadata` ä¸­æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯ï¼š

```yaml
---
name: git-helper
version: "2.1.0"
metadata:
  openclaw:
    min_goclaw_version: "1.5.0"
---
```

#### ç‰ˆæœ¬æ¯”è¾ƒ

Loader ä¼šæ£€æŸ¥ç‰ˆæœ¬å…¼å®¹æ€§ï¼š

```go
// æ£€æŸ¥æŠ€èƒ½è¦æ±‚çš„æœ€ä½ goclaw ç‰ˆæœ¬
if skill.MinGoClawVersion != "" {
    if !versionCompatible(currentVersion, skill.MinGoClawVersion) {
        logger.Warn("Skill requires newer goclaw version",
            zap.String("skill", skill.Name),
            zap.String("required", skill.MinGoClawVersion),
            zap.String("current", currentVersion))
        continue
    }
}
```

#### å¤šç‰ˆæœ¬å…±å­˜

æ”¯æŒåŒä¸€æŠ€èƒ½çš„å¤šä¸ªç‰ˆæœ¬å¹¶å­˜ï¼š

```
~/.goclaw/skills/
â”œâ”€â”€ git-helper@1/
â”œâ”€â”€ git-helper@2/
â””â”€â”€ git-helper -> git-helper@2  # ç¬¦å·é“¾æ¥æŒ‡å‘é»˜è®¤ç‰ˆæœ¬
```

### 11. æ¶æ„å›¾

#### ç³»ç»Ÿæ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User Request                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Agent Loop                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Context Builder                       â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ Base Prompt â”‚  â”‚   Skills     â”‚  â”‚   Memory     â”‚   â”‚    â”‚
â”‚  â”‚  â”‚             â”‚  â”‚  Injection   â”‚  â”‚   Context    â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚         â”‚                â”‚                  â”‚           â”‚    â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â”‚                        â”‚                                 â”‚    â”‚
â”‚  â”‚                 System Prompt                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                       LLM                                  â”‚    â”‚
â”‚  â”‚  (Claude / GPT-4 / etc.)                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   Tool Dispatcher                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    â”‚
â”‚  â”‚  â”‚   exec   â”‚  â”‚read_file â”‚  â”‚web_searchâ”‚  â”‚   ...    â”‚â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚          â”‚            â”‚            â”‚            â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚            â”‚            â”‚            â”‚
           â–¼            â–¼            â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Shell  â”‚ â”‚   File   â”‚ â”‚   Web    â”‚ â”‚   ...    â”‚
    â”‚   Tool   â”‚ â”‚   Tool   â”‚ â”‚   Tool   â”‚ â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Skills åŠ è½½æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Skills Loader                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Workspaceâ”‚        â”‚  User   â”‚        â”‚ Builtin â”‚
   â”‚ Skills  â”‚        â”‚ Skills  â”‚        â”‚ Skills  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Scan & Parse   â”‚
                  â”‚  SKILL.md files â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Dependency Checkâ”‚
                  â”‚  - bins in PATH â”‚
                  â”‚  - env vars set â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                         â”‚
              â–¼                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Valid  â”‚              â”‚ Invalid â”‚
         â”‚ Skills  â”‚              â”‚ (Skip)  â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Apply Config    â”‚
     â”‚ (disabled list) â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Sort by Priorityâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Inject into     â”‚
     â”‚ System Prompt   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12. SKILL.md ç¼–å†™æœ€ä½³å®è·µ

ç”±äº LLM éœ€è¦ç†è§£å¹¶æ‰§è¡Œ SKILL.md çš„å†…å®¹ï¼Œç¼–å†™é«˜è´¨é‡çš„æ–‡æ¡£è‡³å…³é‡è¦ã€‚

#### ç»“æ„æ¨¡æ¿

```markdown
---
name: skill-name
description: ä¸€å¥è¯æè¿°æŠ€èƒ½åŠŸèƒ½
metadata:
  openclaw:
    emoji: "ğŸ”§"
    requires:
      bins: ["required-command"]
    priority: 50
---

# æŠ€èƒ½åç§°

ç®€çŸ­ä»‹ç»è¿™ä¸ªæŠ€èƒ½åšä»€ä¹ˆä»¥åŠä½•æ—¶ä½¿ç”¨ã€‚

## ä½¿ç”¨åœºæ™¯

å½“ç”¨æˆ·æåˆ°ä»¥ä¸‹å…³é”®è¯æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ï¼š
- å…³é”®è¯ 1
- å…³é”®è¯ 2

## æ‰§è¡Œæ­¥éª¤

1. **æ­¥éª¤ä¸€**ï¼šä½¿ç”¨ `tool_name` åšä»€ä¹ˆ
   ```bash
   command example
   ```

2. **æ­¥éª¤äºŒ**ï¼šæ ¹æ®ç»“æœåšå†³ç­–
   - å¦‚æœç»“æœä¸º Aï¼Œæ‰§è¡Œ X
   - å¦‚æœç»“æœä¸º Bï¼Œæ‰§è¡Œ Y

3. **æ­¥éª¤ä¸‰**ï¼šè¾“å‡ºæœ€ç»ˆç»“æœ

## é‡è¦æç¤º

> **æ³¨æ„**ï¼šç‰¹æ®Šæƒ…å†µçš„è¯´æ˜

- è¾¹ç•Œæ¡ä»¶ 1
- è¾¹ç•Œæ¡ä»¶ 2

## å¸¸è§é”™è¯¯

é¿å…ä»¥ä¸‹å¸¸è§é”™è¯¯ï¼š
- âŒ é”™è¯¯åšæ³•
- âœ… æ­£ç¡®åšæ³•
```

#### ç¼–å†™åŸåˆ™

1. **æ˜ç¡®å…·ä½“**ï¼šç»™å‡ºå…·ä½“çš„å‘½ä»¤ç¤ºä¾‹ï¼Œä¸è¦æ¨¡ç³Šæè¿°
   ```markdown
   # âŒ ä¸å¥½
   ä½¿ç”¨ git æ£€æŸ¥çŠ¶æ€

   # âœ… å¥½
   ä½¿ç”¨ `exec` å·¥å…·æ‰§è¡Œï¼š`git status --short`
   ```

2. **åˆ†æ­¥éª¤è¯´æ˜**ï¼šå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºæ¸…æ™°çš„æ­¥éª¤
   ```markdown
   ## æäº¤æµç¨‹

   1. æ£€æŸ¥å½“å‰çŠ¶æ€
   2. ç”Ÿæˆæäº¤ä¿¡æ¯
   3. æ‰§è¡Œæäº¤
   4. ç¡®è®¤ç»“æœ
   ```

3. **ä½¿ç”¨ä»£ç å—**ï¼šæ‰€æœ‰å‘½ä»¤éƒ½åº”è¯¥åœ¨ä»£ç å—ä¸­
   ````markdown
   ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
   ```bash
   curl -s "https://api.example.com" | jq '.data'
   ```
   ````

4. **è¯´æ˜è¾“å‡ºæ ¼å¼**ï¼šå‘Šè¯‰ LLM æœŸæœ›çš„è¾“å‡ºæ ¼å¼
   ```markdown
   API è¿”å› JSON æ ¼å¼ï¼š
   ```json
   {"status": "ok", "data": {...}}
   ```
   ä½¿ç”¨ `jq` æå– `data` å­—æ®µã€‚
   ```

5. **è¾¹ç•Œæ¡ä»¶**ï¼šè¯´æ˜ç‰¹æ®Šæƒ…å†µå¦‚ä½•å¤„ç†
   ```markdown
   ## é”™è¯¯å¤„ç†

   - å¦‚æœè¿”å› 404ï¼Œè¯´æ˜èµ„æºä¸å­˜åœ¨ï¼Œé€šçŸ¥ç”¨æˆ·
   - å¦‚æœè¿”å› 500ï¼Œé‡è¯•æœ€å¤š 3 æ¬¡
   ```

#### ç¤ºä¾‹ï¼šé«˜è´¨é‡ SKILL.md

```markdown
---
name: json-formatter
description: Format and validate JSON files with jq
metadata:
  openclaw:
    emoji: "ğŸ“"
    requires:
      bins: ["jq"]
---

# JSON Formatter

ä½¿ç”¨ `jq` ç¾åŒ–å’ŒéªŒè¯ JSON æ–‡ä»¶ã€‚

## ä½•æ—¶ä½¿ç”¨

å½“ç”¨æˆ·è¦æ±‚ï¼š
- "æ ¼å¼åŒ– JSON"
- "ç¾åŒ–è¿™ä¸ª JSON æ–‡ä»¶"
- "éªŒè¯ JSON æ˜¯å¦åˆæ³•"
- æåˆ° `.json` æ–‡ä»¶æ ¼å¼åŒ–

## æ‰§è¡Œæ­¥éª¤

1. **è¯»å–æ–‡ä»¶**ï¼šä½¿ç”¨ `read_file` å·¥å…·è¯»å–ç›®æ ‡ JSON æ–‡ä»¶

2. **éªŒè¯å¹¶æ ¼å¼åŒ–**ï¼šä½¿ç”¨ `exec` å·¥å…·æ‰§è¡Œ jq
   ```bash
   jq '.' input.json > formatted.json
   ```

3. **æ˜¾ç¤ºç»“æœ**ï¼šæ˜¾ç¤ºæ ¼å¼åŒ–åçš„å†…å®¹æˆ–é”™è¯¯ä¿¡æ¯

## é«˜çº§é€‰é¡¹

### æŒ‡å®šç¼©è¿›
```bash
jq --indent 2 '.' input.json
```

### æå–ç‰¹å®šå­—æ®µ
```bash
jq '.field.name' input.json
```

### è¿‡æ»¤æ•°ç»„
```bash
jq '.[] | select(.age > 18)' input.json
```

## é”™è¯¯å¤„ç†

- å¦‚æœ `jq` æŠ¥é”™ "parse error"ï¼Œè¯´æ˜ JSON æ ¼å¼ä¸åˆæ³•
  - æ˜¾ç¤ºåŸå§‹å†…å®¹å’Œé”™è¯¯ä½ç½®
  - å»ºè®®ç”¨æˆ·ä½¿ç”¨ JSON éªŒè¯å·¥å…·

- å¦‚æœæ–‡ä»¶ä¸ºç©ºæˆ–ä¸å­˜åœ¨
  - ä½¿ç”¨ `read_file` çš„é”™è¯¯ä¿¡æ¯é€šçŸ¥ç”¨æˆ·
```

### 13. CLI å‘½ä»¤å®Œæ•´åˆ—è¡¨

```bash
# ========== æŠ€èƒ½ç®¡ç† ==========
# åˆ—å‡ºæ‰€æœ‰å·²åŠ è½½çš„æŠ€èƒ½
goclaw skills list

# è¯¦ç»†æ¨¡å¼ï¼ˆæ˜¾ç¤º Prompt ç‰‡æ®µï¼‰
goclaw skills list --verbose
goclaw skills list -v

# éªŒè¯æŠ€èƒ½ä¾èµ–
goclaw skills validate [skill-name]

# æµ‹è¯•æŠ€èƒ½
goclaw skills test [skill-name] --prompt "test prompt"

# ========== æŠ€èƒ½å®‰è£… ==========
# ä» Git ä»“åº“å®‰è£…
goclaw skills install https://github.com/user/skills/my-skill

# ä»æœ¬åœ°ç›®å½•å®‰è£…
goclaw skills install ./path/to/skill

# æ›´æ–°æŠ€èƒ½
goclaw skills update [skill-name]

# å¸è½½æŠ€èƒ½
goclaw skills uninstall [skill-name]


# ========== è°ƒè¯• ==========
# æ‰“å°å®Œæ•´ System Prompt
goclaw chat --debug-prompt

# å¯ç”¨è¯¦ç»†æ—¥å¿—
goclaw chat --log-level=debug

# ========== é…ç½® ==========
# æ˜¾ç¤ºå½“å‰é…ç½®
goclaw skills config

# è®¾ç½®é…ç½®
goclaw skills config set disabled skill-name
goclaw skills config set env.skill-name KEY=value
```

## æ€»ç»“

æ­¤æ–¹æ¡ˆå›å½’äº† AgentSkills çš„æœ¬è´¨ï¼š**Prompt Engineering at Scale**ã€‚

| ç‰¹æ€§ | æ—§æ–¹æ¡ˆ (Tool Wrap) | æ–°æ–¹æ¡ˆ (Prompt Injection) |
| :--- | :--- | :--- |
| **å®ç°éš¾åº¦** | é«˜ (éœ€è§£æ Markdown è‡ªåŠ¨ç”Ÿæˆ Tool) | ä½ (ä»…éœ€å­—ç¬¦ä¸²æ‹¼æ¥) |
| **çµæ´»æ€§** | ä½ (å‚æ•°è¢«å†™æ­») | é«˜ (LLM è‡ªç”±ç»„åˆå‘½ä»¤) |
| **å…¼å®¹æ€§** | å·® (ç‰¹æœ‰åè®®) | ä¼˜ (å…¼å®¹ OpenClaw/AgentSkills) |
| **ç»´æŠ¤æ€§** | å·® (ä¾èµ–ä»£ç ç»‘å®š) | ä¼˜ (å®Œå…¨è§£è€¦ï¼Œçƒ­æ›´æ–°) |
| **è°ƒè¯•æ€§** | ä¸­ (éœ€æŸ¥çœ‹ Tool å®šä¹‰) | é«˜ (ç›´æ¥æŸ¥çœ‹ Prompt) |
| **å®‰å…¨æ€§** | ç‹¬ç«‹æ§åˆ¶å±‚ | ä¾èµ–åŸºç¡€å·¥å…·é…ç½® âš ï¸ |
| **çƒ­æ›´æ–°** | éœ€é‡æ–°ç¼–è¯‘ | ä¿®æ”¹æ–‡æœ¬å³å¯ âœ… |